# Chapter 11

The shell stores two basic types of data in the environment, **environment variables** and *shell variables*.

To see env var
```
$ printenv | less
OR
$ printenv USER
himanshu
OR
$ echo $USER
himanshu
```

One element of the environment that neither set nor printenv displays is aliases.

```
$ alias
alias alert='notify-send --urgency=low -i "$([ $? = 0 ] && echo terminal || echo error)" "$(history|tail -n1|sed -e '\''s/^\s*[0-9]\+\s*//;s/[;&|]\s*alert$//'\'')"'
alias egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias grep='grep --color=auto'
alias l='ls -CF'
alias la='ls -A'
alias ll='ls -alF'
alias ls='ls --color=auto'
```

### Startup Files For Login Shell Sessions
- `/etc/profile`: A global configuration script that applies to all users.
- `~/.bash_profile`: A user's personal startup file. Can be used to extend or override settings in the global configuration script.
- `~/.bash_login`: If `~/.bash_profile` is not found, bash attempts to read this script.
- `~/.profile`: If neither `~/.bash_profile` nor `~/.bash_login` is found, bash attempts to read this file. This is the default in Debian-based distributions, such as Ubuntu.

## Startup Files For Non-Login Shell Sessions
- `/etc/bash.bashrc`: A global configuration script that applies to all users.
- `~/.bashrc`: A user's personal startup file. Can be used to extend or override settings in the global configuration script.

## Export Env Var
```
$ export ME="hp"
$ echo $ME
hp
```

## Use a text editor to create/edit a file
```
$ gedit some_file
```

As a general rule, to add directories to your `PATH`, or define additional environment variables, place those changes in `.bash_profile`. `cp` will overwrite existing files silently.

## VI
- `u` - undo
- `a` - move cursor to start of line and enter insert mode
- `A` - move cursor to end of line and enter insert mode
- `i` - enter insert mode
- `esc` - enter command mode
- `:q!` - quit without saving
- `:wq!` - quit with saving
- `o` - insert new line below current line
- `O` - insert new line above current line
- `^` - move to starting of line
- `$` - move to end of line
- 
- Deleting Text
  - `x`	The current character.
  - `3x` The current character and the next two characters.
  - `dd` The current line.
  - `5dd` The current line and the next four lines
  - `dW` From the current cursor position to the beginning of the next word.
  - `d$` From the current cursor location to the end of the current line.
  - `d0` From the current cursor location to the beginning of the line.
  - `d^` From the current cursor location to the first non-whitespace character in the line.
  - `dG` From the current line to the end of the file.
  - `d20G` From the current line to the twentieth line of the file.
- Yanking/Copy Command
  - `yy` The current line.
  - `5yy` The current line and the next four lines.
  - `yW` From the current cursor position to the beginning of the next word.
  - `y$` From the current cursor location to the end of the current line.
  - `y0` From the current cursor location to the beginning of the line.
  - `y^` From the current cursor location to the first non-whitespace character in the line.
  - `yG` From the current line to the end of the file.
  - `y20G` From the current line to the twentieth line of the file.
- `p` - Paste
- Joining Lines: 
If we place the cursor on line 3 and type the `J` command (not to be confused with `j`,
which is for cursor movement), here's what happens:
```
The quick brown fox jumped over the lazy dog. It was cool.
Line 2
Line 3 Line 4
Line 5
```
### Search-And-Replace

#### Searching Within A Line
The command `fa` would move the cursor to the next occurrence of the character `a` within the current line. After performing a character search within a line, the search may be repeated by typing a semicolon `;`.

#### Searching The Entire File
To move the cursor to the next occurrence of a word or phrase, the `/` command is used. Type `/` then type the word or phrase to be searched for, followed by the **Enter** key. After pressing Enter key the cursor will more to the location of word, then press `n` command to continue searching the same word further.

#### Global Search-And-Replace
vi uses an ex command to perform search-and-replace operations. To change the word “Line” to “line” for the entire file, we would enter the following command:
**File**
```
The quick brown fox jumped over the lazy dog. It was cool.
Line 2
Line 3
Line 4
Line 5
```
Command
```
:%s/Line/line/g
```

- `:`   The colon character starts an ex command.
- `%`   Specifies the range of lines for the operation. `%` is a shortcut meaning from the first line to the last line. Alternately, the range could have been specified `1,5` (since our file is five
lines long), or `1,$` which means “from line 1 to the last line in the file.” If the range of lines is omitted, the operation is only performed on the current line.
- `s`   Specifies the operation. In this case, substitution (search-and-replace).
- `/Line/line/`   The search pattern and the replacement text.
- `g`   This means “global” in the sense that the search-and-replace is performed on every instance of the search string in the line. If omitted, only the first instance of the search string on each line
is replaced.

We can also specify a substitution command with user confirmation (for each replacement). This is done by adding a `c` to the end of the command. For example:
```
:%s/line/Line/gc
```
This shows below line for each replacement.
```
replace with Line (y/n/a/q/l/^E/^Y)?
```

- `y`   Perform substitution
- `n`   Skip this instance of the pattern
- `a`   Perform the substitution on this and all subsequent instances of the pattern
- `q or Esc`  Quit substituting
- `l`   Perform this substitution and then quit. Short for “last.”
- `Ctrl-E, Ctrl-Y`  Scroll down and scroll up, respectively. Useful for viewing the context of the proposed substitution.

#### Editing Multiple Files
